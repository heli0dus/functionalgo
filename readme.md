<img src="./fungologo.png" alt="drawing" width="800"/>

# FunGo

FunGo - библиотека для реализации возможностей функционального программирования в языке go. Состоит из следующих пакетов

- **collections** - предоставляет некотоыре коллекции с функциональными инетрфейсами
    - collections/arrayList 
    - collections/hashSet
    - collections/maybe
    - collections/linkedList
    - collections/forwardList
- **functools** - предоставляет функции высшего порядка для композиции и продвинутой работы с базовыми функциями
- **stream** - предоставляет безовые функции по аналогии с Java Stream API, а именно
    - `Fmap(f)` - применяет переданную функцию ко всем элементам стрима
    - `FlatMap(f)` - применяет переданную функцию возвращающую срез и объединяет полученные срезы в один общий стрим
    - `Take(x)` - берёт первые `x` элементов стрима
    - `TakeWhile(p)` - сохраняет в стриме первые элементы пока они соответствуют предикату `p`
    - `Drop(x)` - отбрасывает первые `x` элементов стрима
    - `DropWhile(p)` - отбрасывает элементы стрима пока они соответствуют предикату `p`
    - `Filter(p)` - сохраняет в стриме только элементы, при которых выполянется предикат `p`
    - `Reduce(f, init)` - левая свёртка стрима
    - `All(p)` - `True`, если для всех элементов стрима выполняется предикат `p`
    - `Any(p)` - `True`, если хотя бы для одного элемента стрима выполняется предикат `p`

    Все функции работы со стримами поддерживают обработку ошибок: в случае, если переданная функция вторым возвращаемым значением вернет ошибку, стрим инвалидируется и впоследствии вернет эту ошибку при попытке получения из него среза/значения.

# Технические детали

Для коллекций функции реализованы при помощи generic функций. Стримы же используют типовую рефлексию

# Пример

В файле `main.go` приведен пример использования библиотеки стримов. Команда для сборки и запуска примера:

```bash
go run main.go
```

# Тесты

Команда для прогона всех тестов стримов:

```bash
go test ./stream
```

# Результаты бенчмарков

| Name                         | Total ops number | Ns/op       | Bytes/op  | Allocs/op     |
|------------------------------|------------------|-------------|-----------|---------------|
| BenchmarkClassic-8           | 127980086        | 93.61 ns/op | 56 B/op   | 3 allocs/op   |
| BenchmarkStream-8            | 1949524          | 6158 ns/op  | 2608 B/op | 117 allocs/op |
| BenchmarkClassicFilterOnly-8 | 127329626        | 94.33 ns/op | 56 B/op   | 3 allocs/op   |
| BenchmarkStreamFilterOnly-8  | 11897248         | 1007 ns/op  | 376 B/op  | 20 allocs/op  |
| BenchmarkClassicMapOnly-8    | 85813686         | 138.9 ns/op | 248 B/op  | 5 allocs/op   |
| BenchmarkStreamMapOnly-8     | 4890870          | 2442 ns/op  | 1232 B/op | 49 allocs/op  |
| BenchmarkClassicReduceOnly-8 | 374714445        | 32.06 ns/op | 0 B/op    | 0 allocs/op   |
| BenchmarkStreamReduceOnly-8  | 37207575         | 323.0 ns/op | 136 B/op  | 6 allocs/op   |
